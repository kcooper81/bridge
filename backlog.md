# TeamPrompt Backlog

## Completed
- [x] Member role dashboard restrictions
  - Settings layout: hide Billing & Plan tabs for members
  - Billing page: role gate (admin only message)
  - Plan & Usage tab: role gate (contact admin message)
  - UpgradeGate: member-aware messaging (no upgrade button, "contact admin")
  - Dashboard quick actions: "My Settings" instead of "Manage Team" for members
  - Payment banner: member-safe messaging (no billing links for members)
  - Templates: request+approval system for member installs
    - DB migration: `029_pack_install_requests.sql`
    - API: `/api/template-packs/request` (POST create, GET list)
    - API: `/api/template-packs/request/[requestId]` (PATCH approve/reject)
    - UI: "Request Install" button for members, "Requested" badge, admin approval banner
- [x] Extension install email system
  - API: `POST /api/invite/extension-email` (bulk or targeted, admin/manager only)
  - Auto-sends extension install email on invite accept (non-blocking)
  - Email links to `/extensions` page with browser store links
  - Rate limited (5/min per org)
- [x] Extension tab restructure: Faves, Recent, Prompts
  - Tabs: Faves (default) | Recent | Prompts — Shield removed, now overlay via status bar
  - Guardrails button in status bar with checkmark icon when active
  - "+ Add Rule" text button in status bar → opens dashboard guardrails page
- [x] Categories & tags filtering on all tabs
  - Filter bar (folder dropdown + tag multi-select) now shows on Faves, Recent, and Prompts tabs
- [x] Dashboard: hide settings cog from members
  - Settings gear dropdown hidden for member role
  - Organization tab in settings gated to admin/manager
- [x] Guardrails: member rule/policy suggestion flow
  - DB: `rule_suggestions` table (org_id, team_id nullable, suggested_by, name, description, category, severity, status, reviewed_by)
  - DB migration: `030_rule_suggestions.sql` with RLS policies
  - API: `POST /api/guardrails/suggest` (any org member can suggest)
  - API: `GET /api/guardrails/suggest` (admin/manager gets pending suggestions)
  - API: `PATCH /api/guardrails/suggest/[id]` (approve/reject with notes)

- [x] Marketing, Help Docs & Release Notes Update
  - **Phase 1: Fix inconsistencies**
    - Homepage: "3 members" → "1 member" on Free plan
    - Enterprise: "6 AI tools" → "5 AI tools" in stats
    - Help content: corrected plan info (Free: 1 member/25 prompts, Pro $9, Team $7/user, Business $12/user)
    - Help FAQs: corrected free plan description
  - **Phase 2: Update marketing pages**
    - Homepage: added Compliance Packs + Approval Queue to secondary features, updated analytics desc
    - Features: added 4 new sections (Compliance Packs, Auto-Sanitization, Approval Queue, Version Diff) with mockups
    - Security: added compliance packs grid (6 frameworks), auto-sanitization to benefits, updated How It Works step 02
    - Pricing: added Compliance Packs, Auto-Sanitization, Approval Queue, Version History & Diff rows
    - Enterprise: added Compliance Policy Packs to platform features + benefits, added compliance FAQ
  - **Phase 3: Help articles (7 new)**
    - Guardrails: "What are compliance policy packs?", "How does auto-sanitization work?", "How do I suggest a security rule?"
    - Prompt Vault: "How do I compare prompt versions?"
    - Getting Started: "How do I use the approval queue?"
    - Import/Export: "What are template packs?"
    - Analytics: updated existing article with effectiveness metrics mention
  - **Phase 4: New SEO pages**
    - Use cases: ai-dlp, prompt-management, ai-audit-trail (3 pages)
    - Comparisons: vs-custom-gpts, vs-prompt-managers (2 pages)
    - Industries: education + insurance (data files + page files)
    - Navigation: mega-menu + footer updated with Education, Insurance, Changelog
  - **Phase 5: Release notes system**
    - `src/lib/release-notes.ts` — data file with ReleaseNote interface, APP_VERSION, 4 releases
    - `src/components/dashboard/whats-new-modal.tsx` — modal + reusable ReleaseNotesList + useHasUnseenRelease hook
    - Support modal: added "What's New" tab with red dot indicator for unseen updates
    - Sidebar: version number display (v1.3.0) with unseen dot, clickable to open What's New
    - `src/app/(marketing)/changelog/page.tsx` — public changelog page with SEO metadata

## Pending
- [ ] Compliance Policy Template Packs
  - SOC 2 template added to `compliance-templates.ts`
  - Compliance pack browser UI in Guardrails → Policies tab
  - One-click install function in `vault-api.ts` with de-duplication
- [ ] Auto-Sanitization with Placeholders
  - Scan endpoint returns `sanitized_content` with `{{CATEGORY_N}}` placeholders
  - Extension UI: "Send Sanitized Version" button on violation block
  - Sanitized preview with highlighted placeholders, `action_taken: "auto_redacted"` logging
- [ ] Prompt Effectiveness Analytics
  - `getEffectivenessMetrics()` in vault-api: top/least effective, rating distribution, unrated high-usage
  - UI section in Analytics page: rating distribution bars, top/least effective tables, needs-attention list
- [ ] Approval Queue Dashboard
  - New `/approvals` page with Prompts + Rule Suggestions tabs
  - Approve/reject actions with optional reason modal
  - Sidebar nav item with pending count badge (admin/manager only)
  - API: `getPendingPrompts()`, `approvePrompt()`, `rejectPrompt()`
- [ ] Version History Diff View
  - Migration: `changed_by` column on `prompt_versions`
  - `computeLineDiff()` utility (LCS-based line diff)
  - Compare button in prompt modal showing inline diff with green/red highlighting
  - `updatePrompt()` stores `changed_by: user.id`
