<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ContextIQ Settings</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <div class="logo">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"/>
          <path d="M12 6v6l4 2"/>
        </svg>
        <h1>ContextIQ Settings</h1>
      </div>
      <p class="tagline">Configure how ContextIQ captures conversations and manages your prompts.</p>
    </header>

    <!-- Tracking Section -->
    <section class="section">
      <h2>Tracking</h2>
      <div class="setting-row">
        <div class="setting-info">
          <label for="tracking-enabled">Enable activity tracking</label>
          <p class="setting-desc">Capture your browsing activity to build context for AI conversations.</p>
        </div>
        <label class="toggle">
          <input type="checkbox" id="tracking-enabled">
          <span class="toggle-slider"></span>
        </label>
      </div>
      <div class="setting-row">
        <div class="setting-info">
          <label for="capture-urls">Capture URLs</label>
          <p class="setting-desc">Store page URLs in activity log.</p>
        </div>
        <label class="toggle">
          <input type="checkbox" id="capture-urls">
          <span class="toggle-slider"></span>
        </label>
      </div>
      <div class="setting-row">
        <div class="setting-info">
          <label for="capture-titles">Capture page titles</label>
          <p class="setting-desc">Store page titles for project inference.</p>
        </div>
        <label class="toggle">
          <input type="checkbox" id="capture-titles">
          <span class="toggle-slider"></span>
        </label>
      </div>
    </section>

    <!-- Projects Section -->
    <section class="section">
      <h2>Projects</h2>
      <div class="setting-row">
        <div class="setting-info">
          <label for="auto-infer">Auto-infer projects</label>
          <p class="setting-desc">Automatically group activity into projects using AI clustering.</p>
        </div>
        <label class="toggle">
          <input type="checkbox" id="auto-infer">
          <span class="toggle-slider"></span>
        </label>
      </div>
    </section>

    <!-- Web App Section -->
    <section class="section">
      <h2>Web App (Vault)</h2>
      <div class="setting-row">
        <div class="setting-info">
          <label for="web-app-url">Web app URL</label>
          <p class="setting-desc">Your Vercel-hosted ContextIQ web app URL. The Dashboard button in the popup will open this URL. Leave empty to use the local extension dashboard.</p>
        </div>
        <input type="url" id="web-app-url" placeholder="https://your-app.vercel.app" style="width: 300px; padding: 8px 12px; border: 1px solid #333; border-radius: 6px; background: #1a1a2e; color: #e0e0e0; font-size: 13px;">
      </div>
    </section>

    <!-- AI Integration Section -->
    <section class="section">
      <h2>AI Integration</h2>
      <div class="setting-row">
        <div class="setting-info">
          <label for="injection-mode">Context injection mode</label>
          <p class="setting-desc">How conversation context is provided when bridging to AI tools.</p>
        </div>
        <select id="injection-mode">
          <option value="manual">Manual (click to inject)</option>
          <option value="auto">Auto (inject on page load)</option>
        </select>
      </div>
    </section>

    <!-- Privacy Section -->
    <section class="section">
      <h2>Privacy</h2>
      <div class="setting-row">
        <div class="setting-info">
          <label for="local-only">Local storage only</label>
          <p class="setting-desc">Keep all data on your device. No cloud sync.</p>
        </div>
        <label class="toggle">
          <input type="checkbox" id="local-only">
          <span class="toggle-slider"></span>
        </label>
      </div>
      <div class="setting-row">
        <div class="setting-info">
          <label for="excluded-domains">Excluded domains</label>
          <p class="setting-desc">Domains to exclude from tracking (one per line).</p>
        </div>
        <textarea id="excluded-domains" rows="4" placeholder="example.com&#10;private-site.org"></textarea>
      </div>
    </section>

    <!-- Data Section -->
    <section class="section">
      <h2>Data</h2>
      <div class="setting-row">
        <div class="setting-info">
          <label>Export data</label>
          <p class="setting-desc">Download all your prompts, conversations, and settings as a JSON file.</p>
        </div>
        <button id="btn-export" class="btn">Export</button>
      </div>
      <div class="setting-row">
        <div class="setting-info">
          <label>Clear all data</label>
          <p class="setting-desc">Permanently delete all prompts, conversations, and settings.</p>
        </div>
        <button id="btn-clear" class="btn btn-danger">Clear Data</button>
      </div>
    </section>

    <div id="status" class="status hidden"></div>
  </div>

  <script src="options.js" type="module"></script>
</body>
</html>
